<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>realtimepose.activity.activity API documentation</title>
<meta name="description" content="Orchestrates core packages to run concurrently" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>realtimepose.activity.activity</code></h1>
</header>
<section id="section-intro">
<p>Orchestrates core packages to run concurrently</p>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">&#34;&#34;&#34;Orchestrates core packages to run concurrently&#34;&#34;&#34;
from typing import List

import multiprocessing as mp
import logging
import numpy as np


from realtimepose.activity.scene import Scene
from realtimepose.core.displaying import UserInterface
from realtimepose.core.displaying.components import Skeleton
from realtimepose.core.recieving import PoseGenerator


class Activity:
    &#34;&#34;&#34;A collection of scenes and the abstract logic
    for their interaction.&#34;&#34;&#34;

    _scenes: List[Scene] = []
    active_scene: int = 0
    pose = mp.Array(&#34;d&#34;, 33*4)

    def __init__(self, pose_input: PoseGenerator, frontend: UserInterface) -&gt; None:
        &#34;&#34;&#34;Creates a new activity.

        Args:
            pose_input (PoseGenerator): An object that can generate poses.
            frontend (UserInterface): An object that can create a user interface.
        &#34;&#34;&#34;
        self.pose_input: PoseGenerator = pose_input
        self.frontend: UserInterface = frontend

    def add_scene(self, scene: Scene) -&gt; None:
        &#34;&#34;&#34;Adds a scene to the activity.

        Args:
            scene (Scene): The scene to add
            to the activity.
        &#34;&#34;&#34;
        self._scenes.append(scene)

    def run(self) -&gt; None:
        &#34;&#34;&#34;
        Infinitely retrieves pose data and
        renders the components of added scenes.
        &#34;&#34;&#34;
        logger = mp.log_to_stderr()
        logger.setLevel(mp.SUBDEBUG)  # type: ignore

        p: mp.Process = mp.Process(target=self.update_ui,
                                   args=[self.frontend, self._scenes])
        p.start()

        try:
            self.update_pose()
        except KeyboardInterrupt:
            p.kill()
        except Exception as excpt:
            logging.error(excpt)
            p.kill()
            raise excpt

        p.join()

    def update_pose(self):
        &#34;&#34;&#34;Infinitely attempts to get pose data from the
        global pose input. Does not run well in a sub-process.&#34;&#34;&#34;
        while True:
            pose: np.ndarray = self.pose_input.get_pose()
            pose_list: List[float] = pose.flatten().tolist()
            for index, _ in enumerate(pose_list):
                self.pose[index] = pose_list[index] * 450 + 600

    def update_ui(self, frontend: UserInterface, scenes: List[Scene]):
        &#34;&#34;&#34;Infinitely attempts to render the most current
        version of the active scene of the user interface.
        Intended to run in a sub-process to update the ui
        concurrently with retrieving new data.

        Args:
            frontend (UserInterface): The user interface to update.
            scenes (List[Scene]): The scenes for the activity being rendered.
        &#34;&#34;&#34;
        frontend.new_gui()
        while True:
            frontend.clear()
            for component in scenes[0].components:
                if isinstance(component, Skeleton):
                    component.skeleton_points = np.array(
                        self.pose.get_obj()).reshape((33, 4))

                component.render(frontend.window)

            frontend.update()</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="realtimepose.activity.activity.Activity"><code class="flex name class">
<span>class <span class="ident">Activity</span></span>
<span>(</span><span>pose_input: <a title="realtimepose.core.recieving.service.PoseGenerator" href="../core/recieving/service.html#realtimepose.core.recieving.service.PoseGenerator">PoseGenerator</a>, frontend: <a title="realtimepose.core.displaying.service.UserInterface" href="../core/displaying/service.html#realtimepose.core.displaying.service.UserInterface">UserInterface</a>)</span>
</code></dt>
<dd>
<div class="desc"><p>A collection of scenes and the abstract logic
for their interaction.</p>
<p>Creates a new activity.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>pose_input</code></strong> :&ensp;<code>PoseGenerator</code></dt>
<dd>An object that can generate poses.</dd>
<dt><strong><code>frontend</code></strong> :&ensp;<code>UserInterface</code></dt>
<dd>An object that can create a user interface.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Activity:
    &#34;&#34;&#34;A collection of scenes and the abstract logic
    for their interaction.&#34;&#34;&#34;

    _scenes: List[Scene] = []
    active_scene: int = 0
    pose = mp.Array(&#34;d&#34;, 33*4)

    def __init__(self, pose_input: PoseGenerator, frontend: UserInterface) -&gt; None:
        &#34;&#34;&#34;Creates a new activity.

        Args:
            pose_input (PoseGenerator): An object that can generate poses.
            frontend (UserInterface): An object that can create a user interface.
        &#34;&#34;&#34;
        self.pose_input: PoseGenerator = pose_input
        self.frontend: UserInterface = frontend

    def add_scene(self, scene: Scene) -&gt; None:
        &#34;&#34;&#34;Adds a scene to the activity.

        Args:
            scene (Scene): The scene to add
            to the activity.
        &#34;&#34;&#34;
        self._scenes.append(scene)

    def run(self) -&gt; None:
        &#34;&#34;&#34;
        Infinitely retrieves pose data and
        renders the components of added scenes.
        &#34;&#34;&#34;
        logger = mp.log_to_stderr()
        logger.setLevel(mp.SUBDEBUG)  # type: ignore

        p: mp.Process = mp.Process(target=self.update_ui,
                                   args=[self.frontend, self._scenes])
        p.start()

        try:
            self.update_pose()
        except KeyboardInterrupt:
            p.kill()
        except Exception as excpt:
            logging.error(excpt)
            p.kill()
            raise excpt

        p.join()

    def update_pose(self):
        &#34;&#34;&#34;Infinitely attempts to get pose data from the
        global pose input. Does not run well in a sub-process.&#34;&#34;&#34;
        while True:
            pose: np.ndarray = self.pose_input.get_pose()
            pose_list: List[float] = pose.flatten().tolist()
            for index, _ in enumerate(pose_list):
                self.pose[index] = pose_list[index] * 450 + 600

    def update_ui(self, frontend: UserInterface, scenes: List[Scene]):
        &#34;&#34;&#34;Infinitely attempts to render the most current
        version of the active scene of the user interface.
        Intended to run in a sub-process to update the ui
        concurrently with retrieving new data.

        Args:
            frontend (UserInterface): The user interface to update.
            scenes (List[Scene]): The scenes for the activity being rendered.
        &#34;&#34;&#34;
        frontend.new_gui()
        while True:
            frontend.clear()
            for component in scenes[0].components:
                if isinstance(component, Skeleton):
                    component.skeleton_points = np.array(
                        self.pose.get_obj()).reshape((33, 4))

                component.render(frontend.window)

            frontend.update()</code></pre>
</details>
<h3>Class variables</h3>
<dl>
<dt id="realtimepose.activity.activity.Activity.active_scene"><code class="name">var <span class="ident">active_scene</span> : int</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="realtimepose.activity.activity.Activity.pose"><code class="name">var <span class="ident">pose</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="realtimepose.activity.activity.Activity.add_scene"><code class="name flex">
<span>def <span class="ident">add_scene</span></span>(<span>self, scene: <a title="realtimepose.activity.scene.Scene" href="scene.html#realtimepose.activity.scene.Scene">Scene</a>) ‑> None</span>
</code></dt>
<dd>
<div class="desc"><p>Adds a scene to the activity.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>scene</code></strong> :&ensp;<code>Scene</code></dt>
<dd>The scene to add</dd>
</dl>
<p>to the activity.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def add_scene(self, scene: Scene) -&gt; None:
    &#34;&#34;&#34;Adds a scene to the activity.

    Args:
        scene (Scene): The scene to add
        to the activity.
    &#34;&#34;&#34;
    self._scenes.append(scene)</code></pre>
</details>
</dd>
<dt id="realtimepose.activity.activity.Activity.run"><code class="name flex">
<span>def <span class="ident">run</span></span>(<span>self) ‑> None</span>
</code></dt>
<dd>
<div class="desc"><p>Infinitely retrieves pose data and
renders the components of added scenes.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def run(self) -&gt; None:
    &#34;&#34;&#34;
    Infinitely retrieves pose data and
    renders the components of added scenes.
    &#34;&#34;&#34;
    logger = mp.log_to_stderr()
    logger.setLevel(mp.SUBDEBUG)  # type: ignore

    p: mp.Process = mp.Process(target=self.update_ui,
                               args=[self.frontend, self._scenes])
    p.start()

    try:
        self.update_pose()
    except KeyboardInterrupt:
        p.kill()
    except Exception as excpt:
        logging.error(excpt)
        p.kill()
        raise excpt

    p.join()</code></pre>
</details>
</dd>
<dt id="realtimepose.activity.activity.Activity.update_pose"><code class="name flex">
<span>def <span class="ident">update_pose</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Infinitely attempts to get pose data from the
global pose input. Does not run well in a sub-process.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def update_pose(self):
    &#34;&#34;&#34;Infinitely attempts to get pose data from the
    global pose input. Does not run well in a sub-process.&#34;&#34;&#34;
    while True:
        pose: np.ndarray = self.pose_input.get_pose()
        pose_list: List[float] = pose.flatten().tolist()
        for index, _ in enumerate(pose_list):
            self.pose[index] = pose_list[index] * 450 + 600</code></pre>
</details>
</dd>
<dt id="realtimepose.activity.activity.Activity.update_ui"><code class="name flex">
<span>def <span class="ident">update_ui</span></span>(<span>self, frontend: <a title="realtimepose.core.displaying.service.UserInterface" href="../core/displaying/service.html#realtimepose.core.displaying.service.UserInterface">UserInterface</a>, scenes: List[<a title="realtimepose.activity.scene.Scene" href="scene.html#realtimepose.activity.scene.Scene">Scene</a>])</span>
</code></dt>
<dd>
<div class="desc"><p>Infinitely attempts to render the most current
version of the active scene of the user interface.
Intended to run in a sub-process to update the ui
concurrently with retrieving new data.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>frontend</code></strong> :&ensp;<code>UserInterface</code></dt>
<dd>The user interface to update.</dd>
<dt><strong><code>scenes</code></strong> :&ensp;<code>List[Scene]</code></dt>
<dd>The scenes for the activity being rendered.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def update_ui(self, frontend: UserInterface, scenes: List[Scene]):
    &#34;&#34;&#34;Infinitely attempts to render the most current
    version of the active scene of the user interface.
    Intended to run in a sub-process to update the ui
    concurrently with retrieving new data.

    Args:
        frontend (UserInterface): The user interface to update.
        scenes (List[Scene]): The scenes for the activity being rendered.
    &#34;&#34;&#34;
    frontend.new_gui()
    while True:
        frontend.clear()
        for component in scenes[0].components:
            if isinstance(component, Skeleton):
                component.skeleton_points = np.array(
                    self.pose.get_obj()).reshape((33, 4))

            component.render(frontend.window)

        frontend.update()</code></pre>
</details>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="realtimepose.activity" href="index.html">realtimepose.activity</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="realtimepose.activity.activity.Activity" href="#realtimepose.activity.activity.Activity">Activity</a></code></h4>
<ul class="two-column">
<li><code><a title="realtimepose.activity.activity.Activity.active_scene" href="#realtimepose.activity.activity.Activity.active_scene">active_scene</a></code></li>
<li><code><a title="realtimepose.activity.activity.Activity.add_scene" href="#realtimepose.activity.activity.Activity.add_scene">add_scene</a></code></li>
<li><code><a title="realtimepose.activity.activity.Activity.pose" href="#realtimepose.activity.activity.Activity.pose">pose</a></code></li>
<li><code><a title="realtimepose.activity.activity.Activity.run" href="#realtimepose.activity.activity.Activity.run">run</a></code></li>
<li><code><a title="realtimepose.activity.activity.Activity.update_pose" href="#realtimepose.activity.activity.Activity.update_pose">update_pose</a></code></li>
<li><code><a title="realtimepose.activity.activity.Activity.update_ui" href="#realtimepose.activity.activity.Activity.update_ui">update_ui</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>